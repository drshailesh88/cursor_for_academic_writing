@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;

    /* Academic Purple - Primary */
    --primary: 265 35% 48%;        /* #6f5d96 */
    --primary-foreground: 0 0% 98%;

    /* Warm Gray - Secondary */
    --secondary: 30 15% 55%;        /* #a18a76 */
    --secondary-foreground: 240 5.9% 10%;

    /* Scholarly Gold - Accent */
    --accent: 41 76% 53%;           /* #d9a836 */
    --accent-foreground: 240 5.9% 10%;

    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;

    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;

    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 265 35% 48%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;

    --primary: 265 45% 65%;         /* Lighter purple for dark mode */
    --primary-foreground: 240 5.9% 10%;

    --secondary: 30 20% 45%;        /* Adjusted warm gray */
    --secondary-foreground: 0 0% 98%;

    --accent: 41 80% 60%;           /* Brighter gold for dark mode */
    --accent-foreground: 240 5.9% 10%;

    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;

    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;

    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;

    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 265 45% 65%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Academic serif for content */
  .prose {
    @apply font-serif text-base leading-7;
  }

  /* Citation styles */
  .citation {
    @apply text-primary-600 dark:text-primary-400 text-sm align-super;
  }

  /* Editor styles */
  .ProseMirror {
    @apply prose prose-lg max-w-none focus:outline-none;
  }

  .ProseMirror p {
    @apply mb-4;
  }

  .ProseMirror h1 {
    @apply text-3xl font-bold mb-4 text-primary-700 dark:text-primary-300;
  }

  .ProseMirror h2 {
    @apply text-2xl font-bold mb-3 text-primary-600 dark:text-primary-400;
  }

  .ProseMirror h3 {
    @apply text-xl font-semibold mb-2 text-primary-500 dark:text-primary-500;
  }

  /* Placeholder styles */
  .ProseMirror p.is-editor-empty:first-child::before {
    content: attr(data-placeholder);
    @apply text-muted-foreground pointer-events-none float-left h-0;
  }

  .ProseMirror.is-editor-empty::before {
    content: attr(data-placeholder);
    @apply text-muted-foreground pointer-events-none float-left h-0;
  }

  /* Bibliography styles */
  .bibliography {
    @apply mt-6 pt-6 border-t border-border;
  }

  .bibliography-entry {
    @apply mb-4 pl-8 -indent-8 text-sm leading-relaxed;
  }

  .bibliography-entry em {
    @apply italic;
  }

  .bibliography-entry strong {
    @apply font-semibold;
  }

  /* Inline citation styles */
  .citation {
    @apply text-primary cursor-pointer hover:underline;
  }

  .citation[data-suppress-author="true"] {
    @apply text-muted-foreground;
  }

  /* Track Changes styles */
  .track-insertion {
    background-color: rgba(34, 197, 94, 0.2);
    border-bottom: 2px solid rgb(34, 197, 94);
    cursor: help;
  }

  .dark .track-insertion {
    background-color: rgba(34, 197, 94, 0.15);
  }

  .track-deletion {
    background-color: rgba(239, 68, 68, 0.2);
    text-decoration: line-through;
    color: rgb(239, 68, 68);
    cursor: help;
  }

  .dark .track-deletion {
    background-color: rgba(239, 68, 68, 0.15);
    color: rgb(252, 165, 165);
  }

  /* Track changes tooltip on hover */
  .track-insertion:hover::after,
  .track-deletion:hover::after {
    content: attr(data-user-name);
    position: absolute;
    bottom: 100%;
    left: 0;
    background-color: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
    pointer-events: none;
  }
}

/* Custom scrollbar for academic aesthetic */
@layer utilities {
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-secondary-100 dark:bg-secondary-900;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-secondary-300 dark:bg-secondary-700 rounded-full;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    @apply bg-secondary-400 dark:bg-secondary-600;
  }

  /* Safe area for mobile devices with notch */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top, 0);
  }
}
